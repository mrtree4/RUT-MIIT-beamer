%%% Loading packages useful for typesetting our slides
\usepackage{wrapfig}
\usepackage{xcolor}
\usepackage{etoolbox}
\usepackage{hyperref} 
\urlstyle{same} 

\ProvidesPackage{theme}[2021/01/17] % Defines the theme

\usefonttheme{default} % Font theme

\setbeamertemplate{navigation symbols}{}    % Comment out to show nav. bar
\setbeamertemplate{itemize items}[circle]   % Style of bullet points
%\setbeamertemplate{theorems}[numbered]     % Number objects such as theorems and definitions


\definecolor{MIITblue}{cmyk}{1,0.71,0,0.51}        % Pantone 534 C
\definecolor{MIITlightblue}{cmyk}{0.9,0.47,0,0} % Pantone 285 C
\definecolor{MIITgreen}{cmyk}{0.5,0,0.9,0} 
\definecolor{MIITred}{cmyk}{0.9,0.89,0,0} 
\definecolor{MIITorange}{cmyk}{0,0.85,0.95,0} 
\setbeamercolor{WhiteOnBlue}{bg=MIITblue,fg=white} % White on Pantone 534
\setbeamercolor{BlueOnWhite}{fg=MIITblue,bg=white} % Pantone 534 C on White

\usepackage{hyperref}
\hypersetup{
    unicode=true,          % non-Latin characters in Acrobatâ€™s bookmarks
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=MIITblue,       % color of internal links (change box color with linkbordercolor)
    citecolor=MIITblue,     % color of links to bibliography
    filecolor=MIITblue,     % color of file links
    urlcolor=MIITblue       % color of external links
}

%%% Set color of different objects (see Beamer User Guide for more info)
\usecolortheme[named=MIITblue]{structure}
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{frametitle}{fg=MIITblue}
\setbeamercolor{date}{fg=MIITblue}
\setbeamercolor{institute}{fg=MIITblue}
\setbeamercolor{author}{fg=MIITblue}
\setbeamercolor{headline}{bg=MIITblue}
\setbeamercolor{alerted text}{fg=MIITred}
\setbeamercolor{itemize item}{fg=MIITblue}
\setbeamercolor{itemize subitem}{fg=MIITblue}
\setbeamercolor{itemize subsubitem}{fg=MIITblue}
\setbeamercolor{block title example}{fg=MIITgreen}
\AtBeginEnvironment{exampleblock}{
    \setbeamercolor{itemize item}{fg=MIITgreen}
    \setbeamercolor{itemize subitem}{fg=MIITgreen}
    \setbeamercolor{itemize subsubitem}{fg=MIITgreen}
                                 }
\setbeamercolor{palette primary}{bg=MIITblue}
\setbeamercolor{palette primary}{fg=white}
\setbeamercolor{palette secondary}{bg=MIITblue}
\setbeamercolor{palette secondary}{fg=white}
\setbeamercolor{palette tertiary}{bg=MIITblue}
\setbeamercolor{palette tertiary}{fg=white}

%%% Layout issues

\setbeamertemplate{headline}{\vspace{0.02\textwidth}\hspace{0.05\textwidth}\includegraphics[width=0.06\textwidth]{theme/label}}

\setbeamertemplate{frametitle}{%
  \vspace*{-4ex}
  \begin{beamercolorbox}[leftskip=1.2cm]{frametitle}%
    \usebeamerfont{frametitle}\insertframetitle\\
    \usebeamerfont{framesubtitle}\insertsectionhead
  \end{beamercolorbox}
}

\makeatletter
\setbeamertemplate{footline} % Footline
{
  \leavevmode%
  \hbox{%
%  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2ex,dp=1ex,center]{WhiteOnBlue}%
%    \usebeamerfont{author in head/foot}\insertshortauthor
%  \end{beamercolorbox}%
%  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2ex,dp=1ex,center]{WhiteOnBlue}%
%    \usebeamerfont{title in head/foot}\insertshortinstitute
%  \end{beamercolorbox}%
  %\begin{beamercolorbox}[wd=.333333\paperwidth,ht=2ex,dp=1ex,right]{WhiteOnBlue}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=2ex,dp=1ex,right]{BlueOnWhite}%
    %\usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
  \end{beamercolorbox}
  }%
  \vskip0pt%
}
\makeatother

\setbeamertemplate{title page}
{
  \begin{columns}
    \column{0.25\textwidth}
        \hspace{0.015\textwidth}
        \ifbool{russian}{\includegraphics[height=0.1\paperheight]{theme/logo}}{\includegraphics[height=0.1\paperheight]{theme/logo}}
    \column{0.333\textwidth}
        \begin{beamercolorbox}{institute}
          \usebeamerfont{institute}\footnotesize\insertinstitute
        \end{beamercolorbox}
    \column{0.25\textwidth}
        \begin{beamercolorbox}[right]{date}
          \usebeamerfont{date}\footnotesize\insertdate
        \end{beamercolorbox}
    \end{columns}
    \vspace{20pt} 
    \vfill
  
    \begin{beamercolorbox}[left]{title}
    \usebeamerfont{title}\Huge\inserttitle
    \end{beamercolorbox}
    \vspace{15pt} 
    \begin{beamercolorbox}[left]{subtitle}
        \usebeamerfont{subtitle}\Large\insertsubtitle
    \end{beamercolorbox}
    \vspace{15pt} 
    \begin{beamercolorbox}[left]{author}
        \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
}
